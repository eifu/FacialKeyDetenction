<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Lab 3</title>
		<script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
		<script type="text/javascript" src="heatmap.js"></script>
		<style type="text/css">
			/* No style rules here yet */		

		</style>
	</head>
	<body>
	
	<script type="text/javascript">

	var gridSize = 50,
    h = gridSize,
    w = gridSize,
    rectPadding = 60;
	var margin = {top: 20, right: 80, bottom: 30, left: 50},
    width = 640 - margin.left - margin.right,
    height = 380 - margin.top - margin.bottom;

	var colorScale = d3.scale.linear()
     .domain([-1, -0.75, -0.5, -0.25, 0, 0.25, 0.5, 0.75, 1])
     .range(["#3182bd", "#6baed6", "#6baed6", "#6baed6","white", "#6baed6","#6baed6", "#fd8d3c","#e6550d" ])

	var svg = d3.select("body").append("svg")
    			.attr("width", width + margin.left + margin.right)
    			.attr("height", height + margin.top + margin.bottom)
 	 			.append("g")
   				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


   	d3.csv("corr.csv", function(error, data){

   		data.forEach(function(d){
   			d = +d;
   		})
   		console.log(data);

	var heatMap = svg.selectAll(".heatmap")
    				.data(data, function(d) { return d.col + ':' + d.row; })
  					.enter().append("svg:rect")
    				.attr("x", function(d) { return d.row * w; })
    				.attr("y", function(d) { return d.col * h; })
    				.attr("width", function(d) { return w; })
    				.attr("height", function(d) { return h; })
    				.style("fill", function(d) { return colorScale(d.score); });   		
   	})





	</script>
	</body>
</html>